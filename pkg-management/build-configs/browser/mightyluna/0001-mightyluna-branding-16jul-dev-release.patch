From 84206f548338da3847e433ab036902364803d1cd Mon Sep 17 00:00:00 2001
From: mssx86 <mssftw@protonmail.com>
Date: Tue, 16 Jul 2019 02:34:02 +0300
Subject: mightyluna branding update.

---
 .../shared/locales/browserconfig.properties   |  4 +-
 .../branding/shared/pref/preferences.inc      | 79 ++-------------
 .../branding/shared/pref/uaoverrides.inc      | 97 +++----------------
 .../palemoon/branding/unofficial/branding.nsi | 12 +--
 .../palemoon/branding/unofficial/configure.sh |  2 +-
 .../unofficial/locales/en-US/brand.dtd        |  6 +-
 .../unofficial/locales/en-US/brand.properties |  6 +-
 .../unofficial/pref/palemoon-branding.js      |  4 +-
 8 files changed, 41 insertions(+), 169 deletions(-)

diff --git a/application/palemoon/branding/shared/locales/browserconfig.properties b/application/palemoon/branding/shared/locales/browserconfig.properties
index 92d237144..1bc0ecc4e 100644
--- a/application/palemoon/branding/shared/locales/browserconfig.properties
+++ b/application/palemoon/branding/shared/locales/browserconfig.properties
@@ -3,5 +3,5 @@
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
 # Do NOT localize or otherwise change these values
-browser.startup.homepage=http://start.palemoon.org/
-browser.startup.homepage_reset=http://start.palemoon.org/
+browser.startup.homepage=https://mssx86.github.io/startpage/
+browser.startup.homepage_reset=https://mssx86.github.io/startpage/
diff --git a/application/palemoon/branding/shared/pref/preferences.inc b/application/palemoon/branding/shared/pref/preferences.inc
index 12803f285..213c9f490 100644
--- a/application/palemoon/branding/shared/pref/preferences.inc
+++ b/application/palemoon/branding/shared/pref/preferences.inc
@@ -1,93 +1,34 @@
-// ===| General |==============================================================
+// mightyluna
+pref("startup.homepage_welcome_url","https://mssx86.github.io/startpage/");
+pref("app.vendorURL", "https://github.com/mssx86/mssLinux/");
 
-pref("startup.homepage_welcome_url","http://www.palemoon.org/firstrun.shtml");
-
-pref("app.vendorURL", "http://www.palemoon.org/");
-
-
-// User Interface
-pref("browser.identity.ssl_domain_display", 1); //show domain verified SSL (blue)
-
-// ============================================================================
-
-// ===| Application Update Service |===========================================
+// --- from base palemoon ---
+pref("browser.identity.ssl_domain_display", 1); 
 
+// update and misc (not used but will keep for whatever)
 pref("app.update.url", "https://aus.palemoon.org/?application=%PRODUCT%&version=%VERSION%&arch=%BUILD_TARGET%&buildid=%BUILD_ID%&channel=%CHANNEL%");
-
-// The time interval between the downloading of mar file chunks in the
-// background (in seconds)
 pref("app.update.download.backgroundInterval", 600);
-
-// Give the user x seconds to react before showing the big UI. default=48 hours
 pref("app.update.promptWaitTime", 172800);
-
-// ============================================================================
-
-// ===| Add-ons Manager |======================================================
-
-// Add-on window fixes
 pref("extensions.getMoreThemesURL", "https://addons.palemoon.org/themes/");
-
 pref("extensions.update.autoUpdateDefault", true); // Automatically update extensions by default
 pref("extensions.getAddons.maxResults", 10);
 pref("extensions.getAddons.cache.enabled", false);
-
-// ============================================================================
-
-// ===| DOM |==================================================================
-
-// Set max script runtimes to sane values
 pref("dom.max_chrome_script_run_time", 90); //Some addons need ample time!
 pref("dom.max_script_run_time", 20); //Should be plenty for a page script to do what it needs
-
-// ============================================================================
-
-// ===| Plugins |==============================================================
-
 pref("plugin.default.state", 2); //Allow plugins to run by default
 pref("plugin.expose_full_path", true); //Security: expose the full path to the plugin
 pref("dom.ipc.plugins.timeoutSecs", 20);
-
-// ============================================================================
-
-// ===| Graphics |=============================================================
-
 pref("nglayout.initialpaint.delay", 300);
-
-// ============================================================================
-
-// ===| Image |================================================================
-
 pref("image.mem.max_ms_before_yield", 50);
 pref("image.mem.decode_bytes_at_a_time", 65536); //larger chunks
+pref("accessibility.force_disabled", 1);
+pref("devtools.selfxss.count", 100);
 
-// ============================================================================
-
-// ===| Sync |=================================================================
-
-// Pale Moon Sync server URLs
+// sync
 pref("services.sync.serverURL","https://pmsync.palemoon.org/sync/index.php/");
 pref("services.sync.jpake.serverURL","https://keyserver.palemoon.org/");
 pref("services.sync.termsURL", "http://www.palemoon.org/sync/terms.shtml");
 pref("services.sync.privacyURL", "http://www.palemoon.org/sync/privacy.shtml");
 pref("services.sync.statusURL", "https://pmsync.palemoon.org/status/");
 pref("services.sync.syncKeyHelpURL", "http://www.palemoon.org/sync/help/recoverykey.shtml");
-
-pref("services.sync.APILevel", 1); // FSyncMS doesn't support 'info/configuration' requests
-
-// ============================================================================
-
-// ===| Misc. |================================================================
-
-// Make sure we shortcut out of a11y to save walking unnecessary code
-pref("accessibility.force_disabled", 1);
-
-// ============================================================================
-
-// ===| DevTools |=============================================================
-
-// Number of usages of the web console or scratchpad.
-// If this is less than 5, then pasting code into the web console or scratchpad is disabled
-pref("devtools.selfxss.count", 100);
-
-// ============================================================================
+pref("services.sync.APILevel", 1);
diff --git a/application/palemoon/branding/shared/pref/uaoverrides.inc b/application/palemoon/branding/shared/pref/uaoverrides.inc
index 028b29b41..641aba5e7 100644
--- a/application/palemoon/branding/shared/pref/uaoverrides.inc
+++ b/application/palemoon/branding/shared/pref/uaoverrides.inc
@@ -1,83 +1,14 @@
-// ===| Site Specific User Agent Overrides |===================================
-
-#define GUAO_PREF general.useragent.override
-
-#define GRE_VERSION @MOZILLA_UAVERSION_U@
-#define GRE_VERSION_SLICE Goanna/@GRE_VERSION@
-#define GRE_DATE_SLICE Goanna/20170101
-#define PM_SLICE PaleMoon/@MOZ_APP_VERSION@
-
-#define GK_VERSION @MOZILLA_COMPATVERSION_U@
-#define GK_SLICE Gecko/20100101
-#define FX_SLICE Firefox/@GK_VERSION@
-
-#ifdef XP_UNIX
-#ifndef XP_MACOSX
-#define OS_SLICE X11; Linux x86_64;
-#else
-#define OS_SLICE Macintosh; Intel Mac OS X 10.11;
-#endif
-#else
-#define OS_SLICE Windows NT 6.1; WOW64;
-#endif
-
-// Special-case AMO
-// We send the native UA slice now, since they no longer offer any compatible extensions for us.
-// This will result in an "only with Firefox" message which suits us fine, because it's the truth.
-pref("@GUAO_PREF@.addons.mozilla.org","Mozilla/5.0 (@OS_SLICE@ rv:@GRE_VERSION@) @GRE_DATE_SLICE@ @PM_SLICE@");
-
-// Required for domains that have proven unresponsive to requests from users
-pref("@GUAO_PREF@.live.com","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@ (Pale Moon)");
-pref("@GUAO_PREF@.msn.com","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@ (Pale Moon)");
-pref("@GUAO_PREF@.bing.com","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@ (Pale Moon)");
-pref("@GUAO_PREF@.outlook.com","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@ (Pale Moon)");
-pref("@GUAO_PREF@.web.de","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@ (Pale Moon)");
-pref("@GUAO_PREF@.aol.com","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@ (Pale Moon)");
-pref("@GUAO_PREF@.calendar.yahoo.com","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@ (Pale Moon)");
-pref("@GUAO_PREF@.google.com","Mozilla/5.0 (@OS_SLICE@ rv:52.9) @GK_SLICE@ @GRE_VERSION_SLICE@ Firefox/52.9 @PM_SLICE@");
-pref("@GUAO_PREF@.googlevideos.com","Mozilla/5.0 (@OS_SLICE@ rv:38.9) @GK_SLICE@ @GRE_VERSION_SLICE@ Firefox/38.9 @PM_SLICE@");
-pref("@GUAO_PREF@.gstatic.com","Mozilla/5.0 (@OS_SLICE@ rv:31.9) @GK_SLICE@ @GRE_VERSION_SLICE@ Firefox/31.9 @PM_SLICE@");
-pref("@GUAO_PREF@.yahoo.com","Mozilla/5.0 (@OS_SLICE@ rv:99.9) @GK_SLICE@ Firefox/99.9 (Pale Moon)");
-pref("@GUAO_PREF@.youtube.com","Mozilla/5.0 (@OS_SLICE@ rv:42.0) @GK_SLICE@ Firefox/42.0 @PM_SLICE@");
-pref("@GUAO_PREF@.gaming.youtube.com","Mozilla/5.0 (@OS_SLICE@ rv:42.0) @GK_SLICE@ Firefox/42.0");
-pref("@GUAO_PREF@.dropbox.com","Mozilla/5.0 (@OS_SLICE@ rv:99.9) @GK_SLICE@ Firefox/99.9 (Pale Moon)");
-
-pref("@GUAO_PREF@.players.brightcove.net","Mozilla/5.0 (Windows NT 6.1; Trident/7.0; rv:11.0) like Gecko");
-
-// The never-ending Facebook debacle...
-pref("@GUAO_PREF@.facebook.com","Mozilla/5.0 (@OS_SLICE@ rv:99.9) @GK_SLICE@ Firefox/99.9 (Pale Moon)");
-pref("@GUAO_PREF@.fbcdn.net","Mozilla/5.0 (@OS_SLICE@ rv:99.9) @GK_SLICE@ Firefox/99.9 (Pale Moon)");
-
-
-// UA-Sniffing domains below are pending responses from their operators - temp workaround
-pref("@GUAO_PREF@.chase.com","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@");
-// For Amazon Prime videos
-pref("@GUAO_PREF@.www.amazon.com","Mozilla/5.0 (@OS_SLICE@ rv:45.9) @GK_SLICE@ Firefox/45.9 (Pale Moon)");
-// Soundcloud uses Firefox-exclusive combinations of code. Never pass Firefox slice.
-pref("@GUAO_PREF@.soundcloud.com","Mozilla/5.0 (@OS_SLICE@ rv:@GRE_VERSION@) @GRE_DATE_SLICE@ @PM_SLICE@");
-// Daily motion only likes strict Firefox UAs
-pref("@GUAO_PREF@.dailymotion.com","Mozilla/5.0 (@OS_SLICE@ rv:52.0) @GK_SLICE@ Firefox/52.0");
-
-
-// The following requires native mode. Or it blocks.. "too old firefox", breakage, etc.
-pref("@GUAO_PREF@.deviantart.com","Mozilla/5.0 (@OS_SLICE@ rv:@GRE_VERSION@) @GRE_DATE_SLICE@ @PM_SLICE@");
-pref("@GUAO_PREF@.deviantart.net","Mozilla/5.0 (@OS_SLICE@ rv:@GRE_VERSION@) @GRE_DATE_SLICE@ @PM_SLICE@");
-pref("@GUAO_PREF@.altibox.dk","Mozilla/5.0 (@OS_SLICE@ rv:@GRE_VERSION@) @GRE_DATE_SLICE@ @PM_SLICE@");
-pref("@GUAO_PREF@.altibox.no","Mozilla/5.0 (@OS_SLICE@ rv:@GRE_VERSION@) @GRE_DATE_SLICE@ @PM_SLICE@");
-pref("@GUAO_PREF@.firefox.com","Mozilla/5.0 (@OS_SLICE@ rv:@GRE_VERSION@) @GRE_DATE_SLICE@ @PM_SLICE@");
-
-// UA-Sniffing domains below have indicated no interest in supporting Pale Moon (BOO!)
-pref("@GUAO_PREF@.humblebundle.com","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@ (Pale Moon)");
-pref("@GUAO_PREF@.privat24.ua","Mozilla/5.0 (@OS_SLICE@ rv:38.0) @GK_SLICE@ Firefox/38.0");
-pref("@GUAO_PREF@.citi.com","Mozilla/5.0 (@OS_SLICE@ rv:57.0) @GK_SLICE@ Firefox/57.0 (Pale Moon)");
-pref("@GUAO_PREF@.netflix.com","Mozilla/5.0 (@OS_SLICE@ rv:45.9) @GK_SLICE@ Firefox/45.9");
-pref("@GUAO_PREF@.netflximg.net","Mozilla/5.0 (@OS_SLICE@ rv:45.9) @GK_SLICE@ Firefox/45.9");
-
-// UA-sniffing domains that are "app/vendor-specific" and do not like Pale Moon
-pref("@GUAO_PREF@.web.whatsapp.com","Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36");
-
-// The following domains do not like the Goanna slice
-pref("@GUAO_PREF@.hitbox.tv","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@");
-pref("@GUAO_PREF@.yuku.com","Mozilla/5.0 (@OS_SLICE@ rv:@GK_VERSION@) @GK_SLICE@ @FX_SLICE@ @PM_SLICE@");
-
-// ============================================================================
+// msslinux useragent
+pref("general.useragent.override", "Mozilla/5.0 (X11; Linux x86_64; rv:54.0) Gecko/20100101 Firefox/54.0");
+
+// privacy
+pref("extensions.blocklist.enabled", false);
+pref("services.sync.prefs.sync.security.OCSP.enabled", false);
+pref("security.OCSP.GET.enabled", false);
+pref("security.OCSP.require", false);
+pref("security.OCSP.enabled", 0);
+pref("geo.enabled", false);
+
+// canvas and webgl
+pref("canvas.poisondata", true);
+pref("webgl.disabled", true);
diff --git a/application/palemoon/branding/unofficial/branding.nsi b/application/palemoon/branding/unofficial/branding.nsi
index 62ed242a2..7a57c094e 100644
--- a/application/palemoon/branding/unofficial/branding.nsi
+++ b/application/palemoon/branding/unofficial/branding.nsi
@@ -8,9 +8,9 @@
 
 # BrandFullNameInternal is used for some registry and file system values
 # instead of BrandFullName and typically should not be modified.
-!define BrandFullNameInternal "New Moon"
-!define CompanyName           "Moonchild Productions"
-!define URLInfoAbout          "http://www.palemoon.org"
-!define URLUpdateInfo         "http://www.palemoon.org"
-!define HelpLink              "http://www.palemoon.org"
-!define URLSystemRequirements "http://www.palemoon.org/download.shtml"
+!define BrandFullNameInternal "mightyluna"
+!define CompanyName           "mssx86 - mssLinux"
+!define URLInfoAbout          "https://github.com/mssx86/mssLinux/"
+!define URLUpdateInfo         "https://github.com/mssx86/mssLinux/"
+!define HelpLink              "https://github.com/mssx86/mssLinux/"
+!define URLSystemRequirements "https://github.com/mssx86/mssLinux/"
diff --git a/application/palemoon/branding/unofficial/configure.sh b/application/palemoon/branding/unofficial/configure.sh
index 05a1e1b87..c1594eaa4 100644
--- a/application/palemoon/branding/unofficial/configure.sh
+++ b/application/palemoon/branding/unofficial/configure.sh
@@ -2,4 +2,4 @@
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
-MOZ_APP_DISPLAYNAME=NewMoon
+MOZ_APP_DISPLAYNAME=mightyluna
diff --git a/application/palemoon/branding/unofficial/locales/en-US/brand.dtd b/application/palemoon/branding/unofficial/locales/en-US/brand.dtd
index debb7442d..66ca46cf5 100644
--- a/application/palemoon/branding/unofficial/locales/en-US/brand.dtd
+++ b/application/palemoon/branding/unofficial/locales/en-US/brand.dtd
@@ -2,7 +2,7 @@
    - License, v. 2.0. If a copy of the MPL was not distributed with this
    - file, You can obtain one at http://mozilla.org/MPL/2.0/. -->
 
-<!ENTITY  brandShortName        "New Moon">
-<!ENTITY  brandFullName         "New Moon">
-<!ENTITY  vendorShortName       "a community developer">
+<!ENTITY  brandShortName        "mightyluna">
+<!ENTITY  brandFullName         "mightyluna">
+<!ENTITY  vendorShortName       "mssx86">
 <!ENTITY  trademarkInfo.part1   " ">
diff --git a/application/palemoon/branding/unofficial/locales/en-US/brand.properties b/application/palemoon/branding/unofficial/locales/en-US/brand.properties
index 863a7c83b..c76ff2ac5 100644
--- a/application/palemoon/branding/unofficial/locales/en-US/brand.properties
+++ b/application/palemoon/branding/unofficial/locales/en-US/brand.properties
@@ -2,8 +2,8 @@
 # License, v. 2.0. If a copy of the MPL was not distributed with this
 # file, You can obtain one at http://mozilla.org/MPL/2.0/.
 
-brandShortName=New Moon
-brandFullName=New Moon
-vendorShortName=Moonchild
+brandShortName=mightyluna
+brandFullName=mightyluna
+vendorShortName=mssx86
 
 syncBrandShortName=Sync
diff --git a/application/palemoon/branding/unofficial/pref/palemoon-branding.js b/application/palemoon/branding/unofficial/pref/palemoon-branding.js
index bf46b747a..eea2428ef 100644
--- a/application/palemoon/branding/unofficial/pref/palemoon-branding.js
+++ b/application/palemoon/branding/unofficial/pref/palemoon-branding.js
@@ -3,8 +3,8 @@
 #include ../../shared/pref/preferences.inc
 #include ../../shared/pref/uaoverrides.inc
 
-pref("startup.homepage_override_url","http://www.palemoon.org/unofficial.shtml");
-pref("app.releaseNotesURL", "http://www.palemoon.org/releasenotes.shtml");
+pref("startup.homepage_override_url","https://mssx86.github.io/startpage/");
+pref("app.releaseNotesURL", "https://github.com/mssx86/mssLinux/");
 
 // Updates disabled
 pref("app.update.enabled", false);
-- 
2.20.1

